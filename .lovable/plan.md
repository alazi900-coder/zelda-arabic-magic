

# خطة التعديلات

## الطلب الأول: أداة إزالة التشكيلات مع مراجعة (قبل/بعد)

حالياً أداة "إزالة التشكيلات" تعمل مباشرة بدون مراجعة. المطلوب تحويلها إلى أداة بنفس نمط أداة تنظيف الرموز — تعرض قائمة بالترجمات المتأثرة مع عرض النص قبل وبعد، وأزرار قبول/رفض/موافقة على الكل.

**ملاحظة مهمة:** إزالة التشكيلات لن تضع فراغات مكان الحركات، فقط تحذفها لأنها تجلس فوق الحروف.

### التغييرات:
- **ملف جديد:** `src/components/editor/DiacriticsCleanPanel.tsx` — لوحة مراجعة مشابهة لـ NewlineCleanPanel تعرض النص قبل/بعد إزالة التشكيلات
- **تعديل:** `src/hooks/useEditorState.ts` — تحويل `handleRemoveAllDiacritics` إلى نظام فحص + مراجعة:
  - إضافة state: `diacriticsCleanResults`
  - دالة `handleScanDiacritics`: تفحص الترجمات وتجمع التي تحتوي تشكيلات
  - دوال قبول/رفض فردي وجماعي
- **تعديل:** `src/pages/Editor.tsx` — تغيير زر "إزالة التشكيلات" ليستدعي الفحص بدل التطبيق المباشر، وعرض لوحة المراجعة

---

## الطلب الثاني: إضافة إزالة الحروف الإنجليزية المنفردة للأداة السابقة

دمج كشف الحروف الإنجليزية المنفردة (حرف إنجليزي واحد بين كلمتين عربيتين) مع أداة "تنظيف رموز غير مرغوبة" الموجودة.

### التغييرات:
- **تعديل:** `src/hooks/useEditorState.ts` — توسيع `cleanupPattern` في `handleScanNewlines` ليشمل:
  - حرف إنجليزي منفرد محاط بمسافات أو نص عربي: مثلاً `كلمة a كلمة` تصبح `كلمة كلمة`
  - النمط الجديد: `[a-zA-Z]` عندما يكون محاطاً بمسافات أو بداية/نهاية النص

---

## التفاصيل التقنية

### نمط التشكيلات (بدون فراغات — حذف فقط):
```text
regex: /[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/g
استبدال بـ: '' (نص فارغ، بدون فراغ)
```

### نمط الحروف الإنجليزية المنفردة (مع فراغ):
```text
regex إضافي: (?<=\s|^)[a-zA-Z](?=\s|$)
استبدال بـ: ' ' (فراغ واحد) ثم تنظيف الفراغات المتعددة
```

### الملفات المتأثرة:
1. `src/components/editor/DiacriticsCleanPanel.tsx` — جديد
2. `src/hooks/useEditorState.ts` — تعديل
3. `src/pages/Editor.tsx` — تعديل
