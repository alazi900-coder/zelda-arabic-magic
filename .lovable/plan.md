
# اصلاح النصوص العربية المعكوسة في المحرر

## المشكلة
بعض النصوص الأصلية في ملفات اللعبة تحتوي على عربي معكوس (مخزن بصيغة LTR للعبة). عند عرضها في المحرر تظهر مقلوبة وغير مقروءة، وتقع ضمن فلتر "غير مترجم".

## الحل
اضافة زر **"تصحيح العربي المعكوس"** يقوم بعكس النص المعكوس لاستعادته لشكله الصحيح المقروء، ثم وضعه كترجمة + حمايته تلقائيا من اعادة العكس عند البناء.

### كيف يعمل:
1. النص الأصلي المعكوس (مثلا: "...ةدعاسملا ريكفت لصفلا...") يتم عكسه برمجيا ليصبح مقروءا ("الفصل تفكير المساعدة...")
2. النص المصحح يوضع تلقائيا في حقل الترجمة
3. يتم تفعيل الحماية على هذا النص حتى لا يُعكس مرة أخرى عند بناء الملف النهائي (لأنه اصلا كان معكوسا في الأصل)

### التغييرات التقنية:

**1. اضافة دالة `unReverseBidi` في `src/pages/Editor.tsx`**
- نفس خوارزمية `reverseBidi` الموجودة في edge function (العكس مرتين يعيد النص لأصله)
- تقسيم النص لأجزاء عربية وانجليزية، عكس الأجزاء العربية فقط

**2. اضافة زر "تصحيح المعكوس" لكل نص عربي معكوس**
- يظهر بجانب النص الأصلي الذي يحتوي على أحرف عربية ولا يملك ترجمة بعد
- عند الضغط: يصحح النص ويضعه كترجمة ويحميه تلقائيا

**3. اضافة زر "تصحيح الكل" جماعي**
- زر في شريط الأدوات يصحح جميع النصوص العربية المعكوسة غير المترجمة دفعة واحدة
- يضعها كترجمات ويحميها تلقائيا من اعادة العكس
- هذا يوفر الوقت بدلا من تصحيحها واحدة تلو الأخرى

**4. تأثير على البناء النهائي**
- النصوص المصححة والمحمية لن تمر بعملية BiDi Reversal مرة أخرى عند البناء (لأنها محمية)
- ستظهر في اللعبة بشكلها الصحيح كما كانت أصلا
